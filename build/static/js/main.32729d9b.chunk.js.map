{"version":3,"sources":["services/token-service.js","services/idle-service.js","config.js","services/auth-api-service.js","contexts/UserContext.js","components/Header/Header.js","components/PrivateRoute/PrivateRoute.js","components/PublicOnlyRoute/PublicOnlyRoute.js","components/Form/Form.js","components/Button/Button.js","components/RegistrationForm/RegistrationForm.js","routes/RegistrationRoute/RegistrationRoute.js","components/LoginForm/LoginForm.js","routes/LoginRoute/LoginRoute.js","components/Dashboard/WordsToPractice.js","routes/DashboardRoute/DashboardRoute.js","services/learning-service.js","components/Learning/Word.js","routes/LearningRoute/LearningRoute.js","routes/NotFoundRoute/NotFoundRoute.js","components/App/App.js","serviceWorker.js","index.js"],"names":["_timeoutId","config","process","TokenService","saveAuthToken","token","window","localStorage","setItem","getAuthToken","getItem","clearAuthToken","removeItem","hasAuthToken","parseJwt","jwt","jwtDecode","parseAuthToken","authToken","_getMsUntilExpiry","payload","exp","Date","now","queueCallbackBeforeExpiry","callback","msUntilExpiry","setTimeout","clearCallbackBeforeExpiry","clearTimeout","AuthApiService","postUser","user","fetch","concat","method","headers","content-type","body","JSON","stringify","then","res","ok","json","e","Promise","reject","postLogin","_ref","username","password","err","refreshToken","authorization","_idleCallback","_notIdleEvents","IdleService","setIdleCallback","idleCallback","resetIdleTimer","ev","regiserIdleTimerResets","forEach","event","document","addEventListener","unRegisterIdleResets","removeEventListener","UserContext","React","createContext","error","setError","clearError","setUser","processLogin","processLogout","UserProvider","_Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","console","setState","jwtPayload","id","user_id","name","sub","fetchRefreshToken","logoutBecauseIdle","idle","catch","state","inherits","createClass","key","value","_this2","react_default","a","createElement","Provider","children","Component","Header","handleLogoutClick","context","className","Link","onClick","to","renderLogoutLink","renderLoginLink","contextType","PrivateRoute","component","objectWithoutProperties","Route","assign","render","componentProps","contexts_UserContext","Consumer","userContext","Redirect","pathname","from","location","PublicOnlyRoute","Label","cx","Input","forwardRef","_ref2","ref","type","Required","_ref3","Button","RegistrationForm","firstInput","createRef","handleSubmit","preventDefault","_ev$target","target","onRegistrationSuccess","current","focus","onSubmit","role","htmlFor","required","components_Button_Button","defaultProps","RegistrationRoute","handleRegistrationSuccess","history","push","components_RegistrationForm_RegistrationForm","LoginForm","onLoginSuccess","LoginRoute","handleLoginSuccess","_this$props","destination","components_LoginForm_LoginForm","WordsToPractice","wordArr","words","wordArrToRender","i","length","original","correct_count","incorrect_count","renderWords","DashboardRoute","totalScore","language","getWords","data","total_score","Dashboard_WordsToPractice","LearningService","getWord","postGuess","guess","guessJson","url","Content-type","Authorization","Word","handleInput","currentGuess","postGuessHandler","tempSpace","wordCorrectCount","wordIncorrectCount","isCorrect","nextWord","answer","setNextWordOnClick","currentWord","onChange","bind","updateCounts","LearningRoute","handleSetState","Learning_Word","NotFoundRoute","App","hasError","components_Header_Header","Switch","exact","path","Boolean","hostname","match","ReactDOM","BrowserRouter","UserContext_UserProvider","App_App_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.32729d9b.chunk.js","sourcesContent":["import jwtDecode from 'jwt-decode'\r\nimport config from '../config'\r\n\r\nlet _timeoutId\r\nconst _TEN_SECONDS_IN_MS = 10000\r\n\r\nconst TokenService = {\r\n  saveAuthToken(token) {\r\n    window.localStorage.setItem(config.TOKEN_KEY, token)\r\n  },\r\n  getAuthToken() {\r\n    return window.localStorage.getItem(config.TOKEN_KEY)\r\n  },\r\n  clearAuthToken() {\r\n    window.localStorage.removeItem(config.TOKEN_KEY)\r\n  },\r\n  hasAuthToken() {\r\n    return !!TokenService.getAuthToken()\r\n  },\r\n  parseJwt(jwt) {\r\n    return jwtDecode(jwt)\r\n  },\r\n  parseAuthToken() {\r\n    const authToken = TokenService.getAuthToken()\r\n    if (authToken)\r\n      return TokenService.parseJwt(authToken)\r\n    else\r\n      return undefined\r\n  },\r\n  _getMsUntilExpiry(payload) {\r\n    return (payload.exp * 1000) - Date.now()\r\n  },\r\n  queueCallbackBeforeExpiry(callback) {\r\n    const msUntilExpiry = TokenService._getMsUntilExpiry(\r\n      TokenService.parseAuthToken()\r\n    )\r\n    _timeoutId = setTimeout(callback, msUntilExpiry - _TEN_SECONDS_IN_MS)\r\n  },\r\n  clearCallbackBeforeExpiry() {\r\n    clearTimeout(_timeoutId)\r\n  },\r\n}\r\n\r\nexport default TokenService\r\n","\r\nlet _timeoutId\r\nlet _idleCallback = null\r\nlet _notIdleEvents = [\r\n  'mousedown',\r\n  'mousemove',\r\n  'keypress',\r\n  'scroll',\r\n  'touchstart',\r\n]\r\nconst _FIVE_MINUTES_IN_MS = 5 * 60 * 1000\r\n\r\nconst IdleService = {\r\n  setIdleCallback(idleCallback) {\r\n    _idleCallback = idleCallback\r\n  },\r\n  resetIdleTimer(ev) {\r\n    clearTimeout(_timeoutId)\r\n    _timeoutId = setTimeout(_idleCallback, _FIVE_MINUTES_IN_MS)\r\n  },\r\n  regiserIdleTimerResets() {\r\n    _notIdleEvents.forEach(event =>\r\n      document.addEventListener(\r\n        event,\r\n        IdleService.resetIdleTimer,\r\n        true,\r\n      )\r\n    )\r\n  },\r\n  unRegisterIdleResets() {\r\n    clearTimeout(_timeoutId)\r\n    _notIdleEvents.forEach(event =>\r\n      document.removeEventListener(\r\n        event,\r\n        IdleService.resetIdleTimer,\r\n        true,\r\n      )\r\n    )\r\n  },\r\n}\r\n\r\nexport default IdleService\r\n","export default {\r\n  API_ENDPOINT: \"https://frozen-peak-86835.herokuapp.com/api\",\r\n  TOKEN_KEY: process.env.REACT_APP_API_KEY\r\n  // TOKEN_KEY: \"blogful-client-auth-token\"\r\n};\r\n","import config from \"../config\";\r\nimport TokenService from \"./token-service\";\r\n\r\nconst AuthApiService = {\r\n  postUser(user) {\r\n    return fetch(`${config.API_ENDPOINT}/user`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"content-type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(user)\r\n    }).then(res =>\r\n      !res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n    );\r\n  },\r\n  postLogin({ username, password }) {\r\n    return fetch(`${config.API_ENDPOINT}/auth/token`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"content-type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ username, password })\r\n    }).then(res =>\r\n      !res.ok ? res.json().then(err => Promise.reject(err)) : res.json()\r\n    );\r\n  },\r\n  refreshToken() {\r\n    return fetch(`${config.API_ENDPOINT}/auth/token`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: `Bearer ${TokenService.getAuthToken()}`\r\n      }\r\n    }).then(res =>\r\n      !res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n    );\r\n  }\r\n};\r\n\r\nexport default AuthApiService;\r\n","import React, { Component } from 'react'\r\nimport AuthApiService from '../services/auth-api-service'\r\nimport TokenService from '../services/token-service'\r\nimport IdleService from '../services/idle-service'\r\n\r\nconst UserContext = React.createContext({\r\n  user: {},\r\n  error: null,\r\n  setError: () => {},\r\n  clearError: () => {},\r\n  setUser: () => {},\r\n  processLogin: () => {},\r\n  processLogout: () => {},\r\n})\r\n\r\nexport default UserContext\r\n\r\nexport class UserProvider extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    const state = { user: {}, error: null }\r\n\r\n    const jwtPayload = TokenService.parseAuthToken()\r\n\r\n    if (jwtPayload)\r\n      state.user = {\r\n        id: jwtPayload.user_id,\r\n        name: jwtPayload.name,\r\n        username: jwtPayload.sub,\r\n      }\r\n\r\n    this.state = state;\r\n    IdleService.setIdleCallback(this.logoutBecauseIdle)\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (TokenService.hasAuthToken()) {\r\n      IdleService.regiserIdleTimerResets()\r\n      TokenService.queueCallbackBeforeExpiry(() => {\r\n        this.fetchRefreshToken()\r\n      })\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    IdleService.unRegisterIdleResets()\r\n    TokenService.clearCallbackBeforeExpiry()\r\n  }\r\n\r\n  setError = error => {\r\n    console.error(error)\r\n    this.setState({ error })\r\n  }\r\n\r\n  clearError = () => {\r\n    this.setState({ error: null })\r\n  }\r\n\r\n  setUser = user => {\r\n    this.setState({ user })\r\n  }\r\n\r\n  processLogin = authToken => {\r\n    TokenService.saveAuthToken(authToken)\r\n    const jwtPayload = TokenService.parseAuthToken()\r\n    this.setUser({\r\n      id: jwtPayload.user_id,\r\n      name: jwtPayload.name,\r\n      username: jwtPayload.sub,\r\n    })\r\n    IdleService.regiserIdleTimerResets()\r\n    TokenService.queueCallbackBeforeExpiry(() => {\r\n      this.fetchRefreshToken()\r\n    })\r\n  }\r\n\r\n  processLogout = () => {\r\n    TokenService.clearAuthToken()\r\n    TokenService.clearCallbackBeforeExpiry()\r\n    IdleService.unRegisterIdleResets()\r\n    this.setUser({})\r\n  }\r\n\r\n  logoutBecauseIdle = () => {\r\n    TokenService.clearAuthToken()\r\n    TokenService.clearCallbackBeforeExpiry()\r\n    IdleService.unRegisterIdleResets()\r\n    this.setUser({ idle: true })\r\n  }\r\n\r\n  fetchRefreshToken = () => {\r\n    AuthApiService.refreshToken()\r\n      .then(res => {\r\n        TokenService.saveAuthToken(res.authToken)\r\n        TokenService.queueCallbackBeforeExpiry(() => {\r\n          this.fetchRefreshToken()\r\n        })\r\n      })\r\n      .catch(err => {\r\n        this.setError(err)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const value = {\r\n      user: this.state.user,\r\n      error: this.state.error,\r\n      setError: this.setError,\r\n      clearError: this.clearError,\r\n      setUser: this.setUser,\r\n      processLogin: this.processLogin,\r\n      processLogout: this.processLogout,\r\n    }\r\n    return (\r\n      <UserContext.Provider value={value}>\r\n        {this.props.children}\r\n      </UserContext.Provider>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport TokenService from \"../../services/token-service\";\r\nimport UserContext from \"../../contexts/UserContext\";\r\nimport \"./Header.css\";\r\n\r\nclass Header extends Component {\r\n  static contextType = UserContext;\r\n\r\n  handleLogoutClick = () => {\r\n    this.context.processLogout();\r\n  };\r\n\r\n  renderLogoutLink() {\r\n    return (\r\n      <div>\r\n        <nav className=\"log-out-user\">\r\n          <div className=\"logged-in-user\">{this.context.user.name}</div>\r\n          <Link\r\n            className=\"log-out-user-link\"\r\n            onClick={this.handleLogoutClick}\r\n            to=\"/login\"\r\n          >\r\n            Logout\r\n          </Link>\r\n        </nav>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderLoginLink() {\r\n    return (\r\n      <nav className=\"heading login-page-heading\">\r\n        <Link className=\"heading login-page-login\" to=\"/login\">\r\n          Login\r\n        </Link>{\" \"}\r\n        <Link className=\"heading login-page-register\" to=\"/register\">\r\n          Sign up\r\n        </Link>\r\n      </nav>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header>\r\n        <h1 className=\"heading login-page-header\">\r\n          <Link className=\"heading login-page-link\" to=\"/register\">\r\n            Spaced repetition\r\n          </Link>\r\n        </h1>\r\n        {TokenService.hasAuthToken()\r\n          ? this.renderLogoutLink()\r\n          : this.renderLoginLink()}\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport UserContext from '../../contexts/UserContext'\r\n\r\n\r\n\r\nexport default function PrivateRoute({ component, ...props }) {\r\n  const Component = component\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={componentProps => (\r\n        <UserContext.Consumer>\r\n          {userContext =>\r\n            !!userContext.user.id\r\n              ? <Component {...componentProps} />\r\n              : (\r\n                <Redirect\r\n                  to={{\r\n                    pathname: userContext.user.idle ? '/login' : '/register',\r\n                    state: { from: componentProps.location },\r\n                  }}\r\n                />\r\n              )\r\n          }\r\n        </UserContext.Consumer>\r\n      )}\r\n    />\r\n  )\r\n}","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport UserContext from '../../contexts/UserContext'\r\n\r\nexport default function PublicOnlyRoute({ component, ...props }) {\r\n  const Component = component\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={componentProps => (\r\n        <UserContext.Consumer>\r\n          {userContext =>\r\n            !!userContext.user.id\r\n              ? <Redirect to={'/'} />\r\n              : <Component {...componentProps} />\r\n          }\r\n        </UserContext.Consumer>\r\n      )}\r\n    />\r\n  )\r\n}\r\n","import React from 'react'\r\nimport cx from 'classnames'\r\nimport './Form.css'\r\n\r\nexport function Label({ className, ...props }) {\r\n  return (\r\n    <label className={cx('Label', className)} {...props} />\r\n  )\r\n}\r\n\r\nexport const Input =  React.forwardRef(({ className, ...props }, ref) => {\r\n  return (\r\n    <input className={cx('Input', className)} type='text' ref={ref} {...props} />\r\n  )\r\n})\r\n\r\nexport function Required({ className, ...props }) {\r\n  return (\r\n    <span className={cx('Required', className)} {...props}>\r\n      &#42;\r\n    </span>\r\n  )\r\n}\r\n\r\nexport function Textarea({ className, ...props }) {\r\n  return (\r\n    <textarea className={cx('Textarea', className)} {...props} />\r\n  )\r\n}\r\n","import React from 'react'\r\nimport cx from 'classnames'\r\nimport './Button.css'\r\n\r\nconst Button = React.forwardRef(({ className, ...props }, ref) => {\r\n  return (\r\n    <button className={cx('Button', className)} ref={ref} {...props} />\r\n  )\r\n})\r\n\r\nexport default Button\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Input, Required, Label } from \"../Form/Form\";\r\nimport AuthApiService from \"../../services/auth-api-service\";\r\nimport Button from \"../Button/Button\";\r\nimport \"./RegistrationForm.css\";\r\n\r\nclass RegistrationForm extends Component {\r\n  static defaultProps = {\r\n    onRegistrationSuccess: () => {}\r\n  };\r\n\r\n  state = { error: null };\r\n\r\n  firstInput = React.createRef();\r\n\r\n  handleSubmit = ev => {\r\n    ev.preventDefault();\r\n    const { name, username, password } = ev.target;\r\n    AuthApiService.postUser({\r\n      name: name.value,\r\n      username: username.value,\r\n      password: password.value\r\n    })\r\n      .then(user => {\r\n        name.value = \"\";\r\n        username.value = \"\";\r\n        password.value = \"\";\r\n        this.props.onRegistrationSuccess();\r\n      })\r\n      .catch(res => {\r\n        this.setState({ error: res.error });\r\n      });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.firstInput.current.focus();\r\n  }\r\n\r\n  render() {\r\n    const { error } = this.state;\r\n    return (\r\n      <form id=\"sign-up-form\" onSubmit={this.handleSubmit}>\r\n        <div role=\"alert\">{error && <p>{error}</p>}</div>\r\n        <section id=\"sign-up-container\">\r\n          <div>\r\n            <Label className=\"name-label\" htmlFor=\"registration-name-input\">\r\n              Enter your name\r\n              <Required />\r\n            </Label>\r\n            <br />\r\n            <Input\r\n              ref={this.firstInput}\r\n              id=\"registration-name-input\"\r\n              className=\"name-input\"\r\n              name=\"name\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <Label htmlFor=\"registration-username-input\">\r\n              Choose a username\r\n              <Required />\r\n            </Label>\r\n            <br />\r\n            <Input id=\"registration-username-input\" name=\"username\" required />\r\n          </div>\r\n          <div>\r\n            <Label htmlFor=\"registration-password-input\">\r\n              Choose a password\r\n              <Required />\r\n            </Label>\r\n            <br />\r\n            <Input\r\n              id=\"registration-password-input\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              required\r\n            />\r\n          </div>\r\n        </section>\r\n        <footer>\r\n          <Button id=\"sign-up-button\" type=\"submit\">\r\n            Sign up\r\n          </Button>{\" \"}\r\n          <br />\r\n          <Link className=\"already-have-an-account-link\" to=\"/login\">\r\n            Already have an account?\r\n          </Link>\r\n        </footer>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RegistrationForm;\r\n","import React, { Component } from \"react\";\r\nimport RegistrationForm from \"../../components/RegistrationForm/RegistrationForm\";\r\n\r\nclass RegistrationRoute extends Component {\r\n  static defaultProps = {\r\n    history: {\r\n      push: () => {}\r\n    }\r\n  };\r\n\r\n  handleRegistrationSuccess = () => {\r\n    const { history } = this.props;\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  render() {\r\n    return (\r\n\r\n      <section id=\"sign-up-heading-container\">\r\n        <h2 id=\"sign-up-heading\">Sign up</h2>\r\n        <p id=\"sign-up-desc\">\r\n          Practice learning a language with the spaced repetition revision\r\n          technique.\r\n        </p>\r\n        <RegistrationForm\r\n          onRegistrationSuccess={this.handleRegistrationSuccess}\r\n        />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RegistrationRoute;\r\n","import React, { Component } from \"react\";\r\nimport { Input, Label } from \"../Form/Form\";\r\nimport AuthApiService from \"../../services/auth-api-service\";\r\nimport UserContext from \"../../contexts/UserContext\";\r\nimport Button from \"../Button/Button\";\r\n\r\nclass LoginForm extends Component {\r\n  static defaultProps = {\r\n    onLoginSuccess: () => {}\r\n  };\r\n\r\n  static contextType = UserContext;\r\n\r\n  state = { error: null };\r\n\r\n  firstInput = React.createRef();\r\n\r\n  handleSubmit = ev => {\r\n    ev.preventDefault();\r\n    const { username, password } = ev.target;\r\n\r\n    this.setState({ error: null });\r\n\r\n    AuthApiService.postLogin({\r\n      username: username.value,\r\n      password: password.value\r\n    })\r\n      .then(res => {\r\n        username.value = \"\";\r\n        password.value = \"\";\r\n        this.context.processLogin(res.authToken);\r\n        this.props.onLoginSuccess();\r\n      })\r\n      .catch(res => {\r\n        this.setState({ error: res.error });\r\n      });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.firstInput.current.focus();\r\n  }\r\n\r\n  render() {\r\n    const { error } = this.state;\r\n    return (\r\n      <form className=\"LoginForm heading\" onSubmit={this.handleSubmit}>\r\n        <div role=\"alert\">{error && <p>{error}</p>}</div>\r\n        <div>\r\n          <Label\r\n            className=\"heading login-page-username\"\r\n            htmlFor=\"login-username-input\"\r\n          >\r\n            Username\r\n          </Label>\r\n          <Input\r\n            ref={this.firstInput}\r\n            id=\"login-username-input\"\r\n            name=\"username\"\r\n            required\r\n          />\r\n        </div>\r\n        <br></br>\r\n        <div>\r\n          <Label\r\n            className=\"heading login-page-password\"\r\n            htmlFor=\"login-password-input\"\r\n          >\r\n            Password\r\n          </Label>\r\n          <Input\r\n            id=\"login-password-input\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            required\r\n          />\r\n        </div>\r\n        <br></br>\r\n        <Button className=\"heading login-page-submit\" type=\"submit\">\r\n          Login\r\n        </Button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n","import React, { Component } from \"react\";\r\nimport LoginForm from \"../../components/LoginForm/LoginForm\";\r\n\r\nclass LoginRoute extends Component {\r\n  static defaultProps = {\r\n    location: {},\r\n    history: {\r\n      push: () => {}\r\n    }\r\n  };\r\n\r\n  handleLoginSuccess = () => {\r\n    const { location, history } = this.props;\r\n    const destination = (location.state || {}).from || \"/\";\r\n    history.push(destination);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section>\r\n        <h2 className=\"heading login-page-login-h2\">Login</h2>\r\n        <LoginForm onLoginSuccess={this.handleLoginSuccess} />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginRoute;\r\n","import React, { Component } from \"react\";\r\nimport \"../../routes/DashboardRoute/DashboardRoute.css\";\r\n\r\nclass WordsToPractice extends Component {\r\n  static defaultProps = {\r\n    words: []\r\n  };\r\n\r\n  renderWords() {\r\n    let wordArr = this.props.words;\r\n    let wordArrToRender = [];\r\n    for (let i = 0; i < wordArr.length; i++) {\r\n      wordArrToRender.push(\r\n        <li\r\n          key={this.props.words[i].id}\r\n          className=\"dashboard-individual-word-container\"\r\n        >\r\n          <h4 className=\"word-dashboard\">{wordArr[i].original}</h4>\r\n          correct answer count: {wordArr[i].correct_count}\r\n          <br />\r\n          incorrect answer count: {wordArr[i].incorrect_count}\r\n          <br></br>\r\n          {/* <h4 className=\"attempts-dashboard\"></h4> */}\r\n        </li>\r\n      );\r\n    }\r\n    return wordArrToRender;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section id=\"words-to-practice-container\">\r\n        <ul>\r\n          <div id=\"list-of-words-and-attempts\">{this.renderWords()}</div>\r\n        </ul>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WordsToPractice;\r\n","import React, { Component } from \"react\";\r\nimport WordsToPractice from \"../../components/Dashboard/WordsToPractice\";\r\nimport UserContext from \"../../contexts/UserContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport config from \"../../config\";\r\nimport TokenService from \"../../services/token-service\";\r\n\r\nclass DashboardRoute extends Component {\r\n  state = {\r\n    words: [],\r\n    totalScore: null,\r\n    language: \"\",\r\n    key: null\r\n  };\r\n\r\n  static contextType = UserContext;\r\n\r\n  componentDidMount() {\r\n    this.getWords();\r\n  }\r\n\r\n  getWords() {\r\n    return fetch(`${config.API_ENDPOINT}/language`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${TokenService.getAuthToken()}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        this.setState({\r\n          words: data.words,\r\n          totalScore: data.language.total_score,\r\n          language: data.language.name,\r\n          key: data.words.id\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    let words = this.state.words;\r\n    let key = this.state.key;\r\n\r\n    return (\r\n      <section>\r\n        <section id=\"dashboard-container\">\r\n          <h2 id=\"welcome-message\">\r\n            {this.context.user.name} is learning {this.state.language}!\r\n            <p id=\"total-score-dashboard\">\r\n              Total correct answers: {this.state.totalScore}\r\n            </p>\r\n          </h2>\r\n          <Link to=\"/learn\" id=\"button-lets-learn\" type=\"submit\">\r\n            <div id=\"learn-button-text\">Start practicing</div>\r\n          </Link>\r\n          <h3 id=\"words-header-dashboard\">Words to practice</h3>\r\n          <WordsToPractice words={words} id={key} />\r\n          <section className=\"stats\"></section>\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DashboardRoute;\r\n","import config from \"../config\";\r\nimport TokenService from \"./token-service\";\r\n\r\nconst LearningService = {\r\n  getWords() {\r\n    return fetch(`${config.API_ENDPOINT}/language`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${TokenService.getAuthToken()}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        this.setState({\r\n          words: data.words,\r\n          totalScore: data.language.total_score\r\n        });\r\n      });\r\n  },\r\n\r\n  getWord() {\r\n    return fetch(`${config.API_ENDPOINT}/language/head`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: `Bearer ${TokenService.getAuthToken()}`\r\n      }\r\n    }).then(res =>\r\n      !res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n    );\r\n  },\r\n\r\n  postGuess(guess) {\r\n    const authToken = TokenService.getAuthToken();\r\n    const guessJson = JSON.stringify({\r\n      guess: guess\r\n    });\r\n    const url = `${config.API_ENDPOINT}/language/guess`;\r\n\r\n    return fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        Authorization: `Bearer ${authToken}`\r\n      },\r\n      body: guessJson\r\n    }).then(res =>\r\n      !res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n    );\r\n  }\r\n};\r\n\r\nexport default LearningService;\r\n","import React, { Component } from \"react\";\r\nimport LearningService from \"../../services/learning-service\";\r\nimport Button from \"../Button/Button\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Learning.css\";\r\n\r\nclass Word extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentWord: \"\",\r\n      isCorrect: null,\r\n      wordCorrectCount: this.props.wordCorrectCount,\r\n      wordIncorrectCount: this.props.wordIncorrectCount,\r\n      totalScore: this.props.totalScore,\r\n      nextWord: this.props.nextWord,\r\n      currentGuess: \"\",\r\n      answer: null\r\n    };\r\n\r\n    this.tempSpace = {\r\n      wordCorrectCount: 0,\r\n      wordIncorrectCount: 0\r\n    };\r\n  }\r\n\r\n  handleInput = e => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      currentGuess: e.target.value\r\n    });\r\n  };\r\n\r\n  postGuessHandler = e => {\r\n    e.preventDefault();\r\n\r\n    const guess = this.state.currentGuess;\r\n\r\n    LearningService.postGuess(guess).then(data => {\r\n      this.tempSpace.wordCorrectCount = data.wordCorrectCount;\r\n      this.tempSpace.wordIncorrectCount = data.wordIncorrectCount;\r\n\r\n      this.setState({\r\n        isCorrect: data.isCorrect,\r\n        totalScore: data.totalScore,\r\n        nextWord: data.nextWord,\r\n        answer: data.answer\r\n      });\r\n\r\n      if (this.state.isCorrect === true) {\r\n        this.setState({\r\n          wordCorrectCount: this.state.wordCorrectCount + 1 // incremeting here for interface, but also incrementing on the server-side and saving to DB so that the updated score persists\r\n        });\r\n      } else {\r\n        this.setState({\r\n          wordIncorrectCount: this.state.wordIncorrectCount + 1 // incremeting here for interface, but also incrementing on the server-side and saving to DB so that the updated score persists\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  setNextWordOnClick = () => {\r\n    this.setState({\r\n      isCorrect: null,\r\n      wordCorrectCount: this.tempSpace.wordCorrectCount,\r\n      wordIncorrectCount: this.tempSpace.wordIncorrectCount\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section id=\"translate-page-container\">\r\n        <div className=\"learning_stats\">\r\n          <h4 className=\"learning_correct\">\r\n            You have answered this word correctly {this.state.wordCorrectCount}{\" \"}\r\n            times.\r\n          </h4>\r\n          <h4 className=\"learning_incorrect\">\r\n            You have answered this word incorrectly{\" \"}\r\n            {this.state.wordIncorrectCount} times.\r\n          </h4>\r\n        </div>\r\n        <section className=\"DisplayScore\">\r\n          <p>Your total score is: {this.state.totalScore}</p>\r\n        </section>\r\n\r\n        {this.state.isCorrect === true && (\r\n          <section id=\"correct-answer-feedback\" className=\"DisplayFeedback\">\r\n            <h2>You were correct! :D</h2>\r\n            <p>\r\n              The correct translation for {this.state.currentWord} was{\" \"}\r\n              {this.state.answer} and you chose {this.state.currentGuess}!\r\n            </p>\r\n          </section>\r\n        )}\r\n        {this.state.isCorrect === false && (\r\n          <section id=\"incorrect-answer-feedback\" className=\"DisplayFeedback\">\r\n            <h2>Good try, but not quite right :(</h2>\r\n            <p>\r\n              The correct translation for {this.state.currentWord} was{\" \"}\r\n              {this.state.answer} and you chose {this.state.currentGuess}!\r\n            </p>\r\n          </section>\r\n        )}\r\n\r\n        {this.state.isCorrect === null && (\r\n          <form\r\n            id=\"translation-guess-form\"\r\n            onSubmit={e => {\r\n              this.setState({\r\n                currentWord: this.state.nextWord\r\n              });\r\n              return this.postGuessHandler(e);\r\n            }}\r\n          >\r\n            <h2>Translate the word:</h2> <span>{this.state.nextWord}</span>\r\n            <label htmlFor=\"learn-guess-input\">\r\n              <p className=\"learn-guess-input\">\r\n                What's the translation for this word?\r\n              </p>\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"guess\"\r\n              required\r\n              onChange={this.handleInput.bind(this)}\r\n              id=\"learn-guess-input\"\r\n            ></input>\r\n            <Button\r\n              id=\"button-show-form\"\r\n              type=\"submit\"\r\n              onClick={this.updateCounts}\r\n            >\r\n              Submit your answer\r\n            </Button>\r\n          </form>\r\n        )}\r\n        {this.state.isCorrect !== null && (\r\n          <Button\r\n            id=\"button-show-form\"\r\n            type=\"submit\"\r\n            onClick={this.setNextWordOnClick}\r\n          >\r\n            Try another word!\r\n          </Button>\r\n        )}\r\n        <Link to=\"/\" className=\"button-to-dashboard\" type=\"submit\">\r\n          <div className=\"button-to-dashboard-text\">Dashboard</div>\r\n        </Link>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Word;\r\n","import React, { Component } from \"react\";\r\nimport Word from \"../../components/Learning/Word\";\r\nimport LearningService from \"../../services/learning-service\";\r\nimport \"../../components/Learning/Learning.css\";\r\n\r\nclass LearningRoute extends Component {\r\n  state = {\r\n    wordCorrectCount: 0,\r\n    wordIncorrectCount: 0,\r\n    nextWord: \"\",\r\n    totalScore: 0\r\n  };\r\n\r\n  componentDidMount() {\r\n    LearningService.getWord()\r\n      .then(data => {\r\n        this.handleSetState(data);\r\n      });\r\n  }\r\n\r\n  handleSetState = data => {\r\n    return this.setState({\r\n      nextWord: data.nextWord,\r\n      wordCorrectCount: data.wordCorrectCount,\r\n      wordIncorrectCount: data.wordIncorrectCount,\r\n      totalScore: data.totalScore\r\n    });\r\n  };\r\n\r\n  getWord() {\r\n\r\n    if (this.state.nextWord !== \"\") {\r\n      return (\r\n        <section>\r\n          <Word\r\n            nextWord={this.state.nextWord}\r\n            wordCorrectCount={this.state.wordCorrectCount}\r\n            wordIncorrectCount={this.state.wordIncorrectCount}\r\n            totalScore={this.state.totalScore}\r\n          />\r\n        </section>\r\n      );\r\n    }\r\n    return <div></div>;\r\n  }\r\n\r\n  render() {\r\n    return <section>{this.getWord()}</section>;\r\n  }\r\n}\r\n\r\nexport default LearningRoute;\r\n","import React, { Component } from 'react'\r\n\r\nclass NotFoundRoute extends Component {\r\n  render() {\r\n    return (\r\n      <section>\r\n        <h2>404 - Page not found</h2>\r\n        <p>Try going back to your previous page.</p>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotFoundRoute\r\n","import React, { Component } from 'react'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport Header from '../Header/Header'\r\nimport PrivateRoute from '../PrivateRoute/PrivateRoute'\r\nimport PublicOnlyRoute from '../PublicOnlyRoute/PublicOnlyRoute'\r\nimport RegistrationRoute from '../../routes/RegistrationRoute/RegistrationRoute'\r\nimport LoginRoute from '../../routes/LoginRoute/LoginRoute'\r\nimport DashboardRoute from '../../routes/DashboardRoute/DashboardRoute'\r\nimport LearningRoute from '../../routes/LearningRoute/LearningRoute'\r\nimport NotFoundRoute from '../../routes/NotFoundRoute/NotFoundRoute'\r\nimport './App.css'\r\n\r\nexport default class App extends Component {\r\n  state = { hasError: false }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    console.error(error)\r\n    return { hasError: true }\r\n  }\r\n\r\n  render() {\r\n    const { hasError } = this.state\r\n    return (\r\n      <div className='App'>\r\n        <Header />\r\n        <main>\r\n          {hasError && (\r\n            <p>There was an error! Oh no!</p>\r\n          )}\r\n          <Switch>\r\n            <PrivateRoute\r\n              exact\r\n              path={'/'}\r\n              component={DashboardRoute}\r\n            />\r\n            <PrivateRoute\r\n              path={'/learn'}\r\n              component={LearningRoute}\r\n            />\r\n            <PublicOnlyRoute\r\n              path={'/register'}\r\n              component={RegistrationRoute}\r\n            />\r\n            <PublicOnlyRoute\r\n              path={'/login'}\r\n              component={LoginRoute}\r\n            />\r\n            <Route\r\n              component={NotFoundRoute}\r\n            />\r\n          </Switch>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import \"unfetch/polyfill\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { UserProvider } from \"./contexts/UserContext\";\r\nimport App from \"./components/App/App\";\r\nimport \"./setup-icons\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <UserProvider>\r\n      <App />\r\n    </UserProvider>\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}